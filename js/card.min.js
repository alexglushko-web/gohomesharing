"use strict";window.addEventListener("DOMContentLoaded",()=>{class e{constructor(e,t=0){this.slider=e,this.row=e.querySelector(".slider__row"),this.items=e.querySelectorAll(".slider__item"),this.indents=1*getComputedStyle(this.slider).getPropertyValue("--indents").split("px")[0],this.quantity=1*getComputedStyle(this.slider).getPropertyValue("--quantity"),this.prev=e.querySelector(".slider__toggle.prev"),this.next=e.querySelector(".slider__toggle.next"),this.dots=e.querySelectorAll(".slider__dots-item"),this.index=0,this.interval=t,this.next&&this.next.addEventListener("click",()=>{this.index++,this.toggleSlider()}),this.prev&&this.prev.addEventListener("click",()=>{this.index--,this.toggleSlider()}),this.dots&&this.dots.forEach(e=>{e.addEventListener("click",e=>{for(let t=0;t<this.dots.length;t++)this.dots[t]===e.target?(this.dots[t].classList.add("active"),this.index=t,this.toggleSlider()):this.dots[t].classList.remove("active")})}),this.interval>0&&setInterval(()=>{this.index++,this.toggleSlider()},this.interval)}toggleSlider(){this.index>this.items.length-this.quantity&&(this.index=0),this.index<0&&(this.index=this.items.length-this.quantity),this.dots&&(this.dots.forEach(e=>{e.classList.remove("active")}),this.dots[this.index].classList.add("active")),this.row.style.left=-this.index*(this.items[0].offsetWidth+this.indents)+"px"}}document.querySelectorAll(".object__slider").forEach(t=>{new e(t,0)});let t=document.querySelectorAll(".card__tabs>.tabs__list>.tabs__btn"),a=document.querySelectorAll(".card__tabs>.tabs__item");t.forEach(e=>{e.addEventListener("click",()=>{for(let i=0;i<t.length;i++)t[i]==e?(t[i].classList.add("active"),a[i].classList.add("active")):(t[i].classList.remove("active"),a[i].classList.remove("active"))})});class i{constructor(e,t=new Date,a=0){this.element=e,this.date=new Date,this.activeDate=t,this.minDuration=a,this.months=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],this.monthsTitles=["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"],this.element.querySelector(".calendar__actual-time")&&(this.element.querySelector(".calendar__timepicker").value=this.beautyValue((new Date).getHours()+1)+":00",this.element.querySelector(".calendar__actual-time").addEventListener("click",()=>{let e=this.beautyValue((new Date).getHours()),t=this.beautyValue((new Date).getMinutes());this.element.querySelector(".calendar__timepicker").value=e+":"+t,this.element.querySelector(".calendar__time").innerHTML=e+":"+t})),this.element.querySelector(".calendar__actual-date")&&this.element.querySelector(".calendar__actual-date").addEventListener("click",()=>{this.renderCalendar(this.element),this.activeDate.setDate((new Date).getDate()),this.activeDate.setMonth((new Date).getMonth()),this.activeDate.setFullYear((new Date).getFullYear()),this.element.querySelector(".calendar__date>p").innerHTML=this.beautyValue(this.activeDate.getDate())+" "+this.beautyValue(this.monthsTitles[this.activeDate.getMonth()])+" "+this.activeDate.getFullYear(),this.element.querySelector(".calendar__title").innerHTML=this.beautyValue(this.activeDate.getDate())+"."+this.beautyValue(this.activeDate.getMonth()+1)+"."+this.activeDate.getFullYear(),this.correctTime()}),this.element.querySelector(".calendar__timepicker")&&this.element.querySelector(".calendar__timepicker").addEventListener("input",e=>{this.element.querySelector(".calendar__time").innerHTML=e.target.value,this.correctTime()}),this.element.querySelector(".calendar__prev").addEventListener("click",()=>{this.date.setMonth(this.date.getMonth()-1),this.activeDate.setMonth(this.date.getMonth()-1),this.activeDate.setFullYear(this.date.getFullYear()),this.activeDate.getMonth()>(new Date).getMonth()-2||this.activeDate.getFullYear()>(new Date).getFullYear()?this.renderCalendar(this.element):(this.date.setMonth((new Date).getMonth()),this.activeDate.setMonth((new Date).getMonth()))}),this.element.querySelector(".calendar__next").addEventListener("click",()=>{this.date.setMonth(this.date.getMonth()+1),this.activeDate.setMonth(this.date.getMonth()-1),this.renderCalendar(this.element)}),e.querySelector(".calendar__title").innerHTML=this.beautyValue(this.activeDate.getDate())+"."+this.beautyValue(this.activeDate.getMonth()+1)+"."+this.activeDate.getFullYear(),e.querySelector(".calendar__time")&&(e.querySelector(".calendar__time").innerHTML=this.activeDate.getHours()+1+":00"),e.querySelector(".calendar__send").addEventListener("click",()=>{e.classList.remove("active")}),this.renderCalendar(this.element)}renderCalendar(e){this.date.setDate(1),this.monthDays=e.querySelector(".calendar__days"),this.lastDay=new Date(this.date.getFullYear(),this.date.getMonth()+1,0).getDate(),this.prevLastDay=new Date(this.date.getFullYear(),this.date.getMonth(),0).getDate(),this.firstDayIndex=this.date.getDay(),this.lastDayIndex=new Date(this.date.getFullYear(),this.date.getMonth()+1,0).getDay(),this.nextDays=7-this.lastDayIndex-1,this.days="",e.querySelector(".calendar__date>span").innerHTML=this.months[this.date.getMonth()],e.querySelector(".calendar__date>p").innerHTML=(new Date).getDate()+" "+this.monthsTitles[(new Date).getMonth()]+" "+(new Date).getFullYear();for(let e=this.firstDayIndex-1+this.minDuration;e>0;e--)this.days+=`<div class="calendar__prev-date">${this.prevLastDay-e+1}</div>`;for(let e=1;e<=this.lastDay;e++)e===(new Date).getDate()&&this.date.getMonth()===(new Date).getMonth()?this.days+=`<div class="active">${e+this.minDuration}</div>`:this.days+=`<div>${e+this.minDuration}</div>`;for(let e=1;e<=this.nextDays+1;e++)this.days+=`<div class="calendar__next-date">${e}</div>`,this.monthDays.innerHTML=this.days;this.days=e.querySelectorAll(".calendar__days>div"),this.days.forEach(e=>{1*e.textContent<(new Date).getDate()+this.minDuration&&this.date.getMonth()==(new Date).getMonth()&&this.date.getFullYear()==(new Date).getFullYear()&&e.classList.add("calendar__prev-date")}),this.days.forEach(t=>{t.addEventListener("click",a=>{t.classList.contains("calendar__prev-date")&&t.classList.contains("calendar__next-date")||(this.days.forEach(e=>{e.classList.remove("active")}),t.classList.add("active"),e.querySelector(".calendar__date>p").innerHTML=t.textContent+" "+this.monthsTitles[this.date.getMonth()]+" "+this.date.getFullYear(),this.activeDate.setDate(t.textContent),this.activeDate.setMonth(this.date.getMonth()),this.activeDate.setFullYear(this.date.getFullYear()),e.querySelector(".calendar__title").innerHTML=this.beautyValue(this.activeDate.getDate())+"."+this.beautyValue(this.activeDate.getMonth()+1)+"."+this.activeDate.getFullYear(),this.correctTime())})})}beautyValue(e){return e.toString().length<2&&(e="0"+e),e}correctTime(){let e=(new Date).getDate()+":"+(new Date).getMonth()+":"+(new Date).getFullYear(),t=this.activeDate.getDate()+":"+this.activeDate.getMonth()+":"+this.activeDate.getFullYear(),a=(new Date).getHours(),i=null,s=(new Date).getMinutes(),n=null;this.element.querySelector(".calendar__timepicker")&&(i=1*this.element.querySelector(".calendar__timepicker").value.split(":")[0],n=1*this.element.querySelector(".calendar__timepicker").value.split(":")[1]),(e==t&&i<=a&&n<s||e==t&&i<a)&&(this.element.querySelector(".calendar__timepicker").value=a+":"+s,this.element.querySelector(".calendar__time").innerHTML=a+":"+s)}}let s=new Date;s.setDate((new Date).getDate()+1),[[document.querySelectorAll(".registration__options__list>.calendar")[0]],[document.querySelectorAll(".registration__options__list>.calendar")[1],s,1]].forEach(e=>{new i(e[0],e[1],e[2]),e[0].querySelector(".calendar__btn").addEventListener("click",()=>{e[0].classList.toggle("active")}),m(e[0])});let n=document.querySelector(".registration__options__list>.start-date"),r=document.querySelector(".registration__options__list>.end-date"),l=document.querySelector(".registration__options__list>.duration"),c=document.querySelector(".registration__item.cost>.cost__title"),h=document.querySelector(".registration__price>.type__list>.type__item.active");function o(e,t){let a=e.querySelector(".calendar__title").textContent,i=a.split(".")[0],s=a.split(".")[1],n=a.split(".")[2],r=e.querySelector(".calendar__time").textContent,l=r.split(":")[0],c=r.split(":")[1],h=new Date(n,s-1,i,l,c),o=t.querySelector(".calendar__title").textContent,d=o.split(".")[0],u=o.split(".")[1],_=o.split(".")[2],m=t.querySelector(".calendar__time").textContent,y=m.split(":")[0],g=m.split(":")[1];return(new Date(_,u-1,d,y,g)-h)/1e3/3600}c.textContent=h.textContent*o(n,r)+" руб.",l.querySelector(".duration__title").textContent=o(n,r),n.addEventListener("click",()=>{let e=o(n,r);c.textContent=h.textContent*e+" руб.",l.querySelector(".duration__title").textContent=e}),r.addEventListener("click",()=>{let e=o(n,r);c.textContent=h.textContent*e+" руб.",l.querySelector(".duration__title").textContent=e});let d=document.querySelectorAll(".registration__cards__item"),u=document.querySelectorAll(".registration__cards__item>.cards__title"),_=document.querySelectorAll(".registration__payment");function m(e){$(document).mouseup((function(t){var a=$(e);0===a.has(t.target).length&&a.removeClass("active")}))}function y(){window.matchMedia("(max-width: 1440px)").matches,window.matchMedia("(max-width: 1024px)").matches,window.matchMedia("(max-width: 768px)").matches,window.matchMedia("(max-width: 576px)").matches,window.matchMedia("(max-width: 360px)").matches}d.forEach(e=>m(e)),u.forEach(e=>{e.addEventListener("click",()=>{for(let t=0;t<u.length;t++)u[t]==e&&d[t].classList.toggle("active")})}),_.forEach(e=>{let t=e.querySelector(".payment__close"),a=e.querySelector(".payment__btn"),i=e.querySelector(".payment__checkbox"),s=e.querySelector(".payment__email");function n(){_.forEach(e=>{for(let t=0;t<_.length;t++)_[t]==e&&d[t].classList.remove("active")})}i.addEventListener("click",()=>{s.classList.contains("active")?s.classList.remove("active"):s.classList.add("active"),console.log("ee")}),t.addEventListener("click",n),a.addEventListener("click",n)}),y(),window.addEventListener("resize",y)});